<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>One-Up Travel | AI Travel Planning</title>

  <!-- Early theme detection (prevents flash) -->
  <script>if(localStorage.getItem('travelWithPurpose')==='true')document.documentElement.classList.add('purpose-theme');</script>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter", sans-serif;
      overflow-x: hidden;
      background: #0a0a0f;
      color: white;
    }

    /* =============== PURPOSE THEME (Green/Teal) =============== */
    .purpose-theme body,
    html.purpose-theme { background: #050e08; }

    /* Background gradient overlays — nature feel */
    .purpose-theme .bg-gradient-top {
      background:
        radial-gradient(ellipse at 50% 60%, rgba(16,185,129,0.07) 0%, transparent 55%),
        radial-gradient(ellipse at 30% 20%, rgba(20,184,166,0.05) 0%, transparent 50%),
        radial-gradient(ellipse at 70% 80%, rgba(52,211,153,0.04) 0%, transparent 50%) !important;
    }

    /* Subtle earth-tone vignette */
    .purpose-theme .bg-vignette {
      background: radial-gradient(ellipse at center, transparent 40%, rgba(5,14,8,0.6) 100%) !important;
    }

    /* Hide travel emoji particles in purpose mode */
    .purpose-theme .travel-particles { opacity: 0 !important; transition: opacity 0.5s; }

    /* Search button */
    .purpose-theme .search-btn {
      background: #059669 !important;
      box-shadow: 0 4px 12px rgba(16,185,129,0.3) !important;
    }
    .purpose-theme .search-btn:hover {
      background: #047857 !important;
      box-shadow: 0 6px 20px rgba(16,185,129,0.4) !important;
    }

    /* Search box focus */
    .purpose-theme .search-box:focus-within {
      border-color: rgba(16,185,129,0.5) !important;
      box-shadow: 0 8px 30px rgba(16,185,129,0.15) !important;
    }

    /* Feature pills hover */
    .purpose-theme .feature:hover {
      background: rgba(16,185,129,0.1) !important;
      border-color: rgba(16,185,129,0.3) !important;
    }

    /* Sign in button */
    .purpose-theme .signin-btn {
      background: #059669 !important;
    }
    .purpose-theme .signin-btn:hover {
      background: #047857 !important;
      box-shadow: 0 4px 12px rgba(16,185,129,0.3) !important;
    }

    /* One-Up logo dot */
    .purpose-theme .logo-dot {
      background: #10b981 !important;
      box-shadow: 0 0 12px rgba(16,185,129,0.7), 0 0 24px rgba(16,185,129,0.3) !important;
    }
    @keyframes purpose-pulse {
      0%, 100% { opacity: 1; box-shadow: 0 0 12px rgba(16,185,129,0.7), 0 0 24px rgba(16,185,129,0.3); }
      50% { opacity: 0.6; box-shadow: 0 0 20px rgba(16,185,129,0.9), 0 0 40px rgba(16,185,129,0.4); }
    }
    .purpose-theme .logo-dot { animation: purpose-pulse 3s ease-in-out infinite !important; }

    /* Lisa section label + avatar */
    .purpose-theme .lisa-section-label {
      background: rgba(16,185,129,0.15) !important;
      border-color: rgba(16,185,129,0.25) !important;
    }
    .purpose-theme .lisa-section-title span {
      background: linear-gradient(135deg, #34d399, #14b8a6, #06b6d4) !important;
      -webkit-background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }
    .purpose-theme .lisa-avatar {
      background: linear-gradient(135deg, #10b981, #14b8a6, #06b6d4) !important;
    }

    /* Lisa send button */
    .purpose-theme .lisa-chat-send {
      background: #059669 !important;
    }
    .purpose-theme .lisa-chat-send:hover {
      background: #047857 !important;
      box-shadow: 0 4px 16px rgba(16,185,129,0.4) !important;
    }
    .purpose-theme .lisa-chat-input input:focus {
      border-color: rgba(16,185,129,0.4) !important;
    }

    /* Lisa CTA button */
    .purpose-theme .lisa-cta-btn {
      background: #059669 !important;
      box-shadow: 0 4px 20px rgba(16,185,129,0.3) !important;
    }
    .purpose-theme .lisa-cta-btn:hover {
      background: #047857 !important;
      box-shadow: 0 8px 32px rgba(16,185,129,0.4) !important;
    }

    /* Headline accent */
    .purpose-theme .headline-accent {
      background: linear-gradient(135deg, #34d399, #14b8a6, #06b6d4) !important;
      -webkit-background-clip: text !important;
      -webkit-text-fill-color: transparent !important;
    }
    .purpose-theme .headline-accent::after {
      background: linear-gradient(135deg, #34d399, #14b8a6, #06b6d4) !important;
    }

    /* Chat message avatars */
    .purpose-theme .chat-msg-avatar-lisa {
      background: linear-gradient(135deg, #10b981, #14b8a6, #06b6d4) !important;
    }

    /* Sidebar active state */
    .purpose-theme .sidebar-item:hover,
    .purpose-theme .sidebar-item.active {
      background: rgba(16,185,129,0.15) !important;
      border-color: rgba(16,185,129,0.3) !important;
    }
    .purpose-theme .sidebar-item.primary {
      background: rgba(16,185,129,0.15) !important;
      border-color: rgba(16,185,129,0.4) !important;
      color: #6ee7b7 !important;
    }

    /* Footer links */
    .purpose-theme .footer-link:hover {
      color: #34d399 !important;
    }

    /* Scrollbar */
    .purpose-theme ::-webkit-scrollbar-thumb {
      background: rgba(16,185,129,0.3) !important;
    }

    /* Globe canvas — hue-shift from purple to green/teal */
    .purpose-theme canvas#globeCanvas {
      filter: hue-rotate(280deg) saturate(1.15);
      opacity: 0 !important;
      transition: opacity 0.8s ease;
    }

    /* Tree canvas */
    canvas#treeCanvas {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: opacity 1s ease;
      pointer-events: none;
    }
    .purpose-theme canvas#treeCanvas {
      opacity: 0.85;
    }

    /* Nature elements container */
    .nature-elements {
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity 1s ease 0.3s;
    }
    .purpose-theme .nature-elements { opacity: 1; }

    /* Flying birds */
    .bird {
      position: absolute;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .purpose-theme .bird { opacity: 1; }

    .bird-1 { width: 40px; top: 15%; animation: birdFly1 18s linear infinite; }
    .bird-2 { width: 35px; top: 22%; animation: birdFly2 22s linear infinite 3s; }
    .bird-3 { width: 30px; top: 12%; animation: birdFly3 25s linear infinite 7s; }
    .bird-4 { width: 25px; top: 28%; animation: birdFly4 20s linear infinite 5s; }
    .bird-5 { width: 22px; top: 18%; animation: birdFly5 28s linear infinite 12s; }

    .bird svg { width: 100%; height: auto; }

    @keyframes birdFly1 {
      0% { left: -5%; transform: translateY(0) scaleX(1); }
      25% { transform: translateY(-15px) scaleX(1); }
      50% { transform: translateY(5px) scaleX(1); }
      75% { transform: translateY(-10px) scaleX(1); }
      100% { left: 105%; transform: translateY(0) scaleX(1); }
    }
    @keyframes birdFly2 {
      0% { left: 105%; transform: translateY(0) scaleX(-1); }
      25% { transform: translateY(-20px) scaleX(-1); }
      50% { transform: translateY(8px) scaleX(-1); }
      75% { transform: translateY(-12px) scaleX(-1); }
      100% { left: -5%; transform: translateY(0) scaleX(-1); }
    }
    @keyframes birdFly3 {
      0% { left: -8%; transform: translateY(0) scaleX(1); }
      30% { transform: translateY(-25px) scaleX(1); }
      60% { transform: translateY(10px) scaleX(1); }
      100% { left: 108%; transform: translateY(-5px) scaleX(1); }
    }
    @keyframes birdFly4 {
      0% { left: 110%; transform: translateY(0) scaleX(-1); }
      40% { transform: translateY(-18px) scaleX(-1); }
      70% { transform: translateY(6px) scaleX(-1); }
      100% { left: -10%; transform: translateY(-8px) scaleX(-1); }
    }
    @keyframes birdFly5 {
      0% { left: -3%; transform: translateY(0) scaleX(1); }
      35% { transform: translateY(-22px) scaleX(1); }
      65% { transform: translateY(12px) scaleX(1); }
      100% { left: 103%; transform: translateY(-3px) scaleX(1); }
    }

    /* =============== ANIMATED GLOBE / VIDEO BACKGROUND =============== */
    .bg-canvas-wrap {
      position: fixed;
      inset: 0;
      z-index: 0;
      overflow: hidden;
    }

    canvas#globeCanvas {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0.55;
    }

    /* Gradient overlays on top of canvas */
    .bg-gradient-top {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse at 30% 20%, rgba(99,102,241,0.08) 0%, transparent 60%),
        radial-gradient(ellipse at 70% 80%, rgba(139,92,246,0.05) 0%, transparent 50%);
      pointer-events: none;
    }

    .bg-vignette {
      position: absolute;
      inset: 0;
      background: radial-gradient(ellipse at center, transparent 50%, #0a0a0f 90%);
      pointer-events: none;
    }

    /* Floating travel particles */
    .travel-particles {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      font-size: 16px;
      opacity: 0;
      animation: particleFloat linear infinite;
    }

    @keyframes particleFloat {
      0% { opacity: 0; transform: translateY(100vh) rotate(0deg) scale(0.5); }
      10% { opacity: 0.25; }
      90% { opacity: 0.25; }
      100% { opacity: 0; transform: translateY(-10vh) rotate(360deg) scale(1); }
    }

    /* =============== CONTENT WRAPPER =============== */
    .content {
      position: relative;
      z-index: 10;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* =============== HEADER =============== */
    header {
      padding: 25px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
    }

    .header-left { flex: 1; display: flex; align-items: center; }
    .header-center { flex: 1; display: flex; justify-content: center; }
    .header-right { flex: 1; display: flex; justify-content: flex-end; align-items: center; }

    .logo { display: flex; align-items: center; text-decoration: none; }
    .logo img { height: 60px; transition: all 0.3s ease; }
    .logo img:hover { transform: scale(1.05); }

    .header-menu-btn {
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .header-menu-btn:hover { background: rgba(255, 255, 255, 0.05); border-color: rgba(255, 255, 255, 0.3); }
    .header-menu-btn i { width: 18px; height: 18px; }

    nav { display: none; }

    .signin-btn {
      background: #6366f1;
      color: white;
      text-decoration: none;
      padding: 10px 24px;
      border-radius: 10px;
      font-weight: 600;
      font-size: 15px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(99, 102, 241, 0.2);
      margin-left: 20px;
    }
    .signin-btn:hover { background: #4f46e5; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); }

    /* =============== HERO =============== */
    .hero {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 50px 30px;
      max-width: 900px;
      margin: 0 auto;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      padding: 8px 20px;
      border-radius: 50px;
      color: white;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 30px;
      animation: fadeInUp 0.8s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    h1 {
      font-size: 72px;
      font-weight: 800;
      line-height: 1.15;
      margin-bottom: 25px;
      letter-spacing: -2px;
      animation: fadeInUp 0.8s ease 0.2s backwards;
      color: white;
    }

    .headline-accent {
      position: relative;
      display: inline-block;
      background: linear-gradient(135deg, #a5b4fc, #c084fc, #f0abfc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .headline-accent::after {
      content: attr(data-text);
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #a5b4fc, #c084fc, #f0abfc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: blur(20px);
      opacity: 0.45;
      z-index: -1;
    }

    .headline-separator {
      display: inline-block;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #6366f1;
      vertical-align: middle;
      margin: 0 16px;
      box-shadow: 0 0 12px rgba(99,102,241,0.7), 0 0 24px rgba(99,102,241,0.3);
      animation: sepPulse 2.5s ease infinite;
    }

    .headline-separator:nth-of-type(2) { animation-delay: 0.8s; }

    @keyframes sepPulse {
      0%, 100% { opacity: 1; box-shadow: 0 0 12px rgba(99,102,241,0.7), 0 0 24px rgba(99,102,241,0.3); }
      50% { opacity: 0.6; box-shadow: 0 0 20px rgba(99,102,241,0.9), 0 0 40px rgba(99,102,241,0.4); }
    }

    .headline-line {
      display: block;
    }

    .subtitle {
      font-size: 20px;
      color: rgba(255, 255, 255, 0.8);
      max-width: 650px;
      margin-bottom: 45px;
      line-height: 1.6;
      animation: fadeInUp 0.8s ease 0.4s backwards;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* SEARCH BOX */
    .search-container {
      width: 100%;
      max-width: 700px;
      margin-bottom: 30px;
      animation: fadeInUp 0.8s ease 0.6s backwards;
    }

    .search-box {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(30px);
      border: 1.5px solid rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      padding: 20px 25px;
      display: flex;
      align-items: center;
      gap: 15px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .search-box:focus-within {
      background: rgba(255, 255, 255, 0.08);
      border-color: rgba(99, 102, 241, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(99, 102, 241, 0.15);
    }

    .search-icon { color: rgba(255, 255, 255, 0.6); flex-shrink: 0; }

    .search-box input {
      flex: 1; background: transparent; border: none; outline: none;
      color: white; font-size: 17px; font-weight: 400;
    }
    .search-box input::placeholder { color: rgba(255, 255, 255, 0.5); }

    .search-btn {
      background: #6366f1; color: white; border: none;
      padding: 14px 35px; border-radius: 12px; font-size: 16px; font-weight: 600;
      cursor: pointer; transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }
    .search-btn:hover { background: #4f46e5; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4); }
    .search-btn:active { transform: translateY(0); }

    /* FEATURES */
    .features {
      display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;
      animation: fadeInUp 0.8s ease 0.8s backwards;
    }

    .feature {
      background: rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 15px 25px; border-radius: 12px;
      color: rgba(255, 255, 255, 0.8); font-size: 14px; font-weight: 500;
      display: flex; align-items: center; gap: 10px;
      transition: all 0.3s ease; cursor: pointer;
    }
    .feature:hover { background: rgba(99, 102, 241, 0.1); border-color: rgba(99, 102, 241, 0.3); color: white; transform: translateY(-2px); }
    .feature:active { transform: translateY(0); }

    /* TRAVEL WITH PURPOSE TOGGLE */
    .purpose-toggle-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 18px;
      animation: fadeInUp 0.8s ease 0.65s backwards;
    }
    .purpose-toggle-label {
      font-size: 13px;
      font-weight: 600;
      color: rgba(255,255,255,0.6);
      display: flex;
      align-items: center;
      gap: 7px;
      transition: color 0.3s;
      cursor: pointer;
      user-select: none;
    }
    .purpose-toggle-label.active { color: #34d399; }
    .purpose-toggle {
      position: relative;
      width: 48px;
      height: 26px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.12);
      border-radius: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }
    .purpose-toggle.active {
      background: rgba(16,185,129,0.25);
      border-color: rgba(16,185,129,0.5);
    }
    .purpose-toggle-dot {
      position: absolute;
      top: 3px;
      left: 3px;
      width: 18px;
      height: 18px;
      background: rgba(255,255,255,0.5);
      border-radius: 50%;
      transition: all 0.3s cubic-bezier(0.4,0,0.2,1);
    }
    .purpose-toggle.active .purpose-toggle-dot {
      left: 25px;
      background: #34d399;
      box-shadow: 0 0 12px rgba(52,211,153,0.5);
    }
    .purpose-badge {
      display: none;
      align-items: center;
      gap: 5px;
      padding: 4px 12px;
      background: rgba(16,185,129,0.1);
      border: 1px solid rgba(16,185,129,0.2);
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      color: #34d399;
      letter-spacing: 0.3px;
      animation: fadeInUp 0.3s ease;
    }
    .purpose-badge.show { display: inline-flex; }

    /* =============== LISA CHATBOT PREVIEW =============== */
    .lisa-section {
      position: relative;
      z-index: 10;
      padding: 80px 30px 100px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .lisa-section-label {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 16px;
      background: rgba(16,185,129,0.12);
      border: 1px solid rgba(16,185,129,0.25);
      border-radius: 20px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: #6ee7b7;
      margin-bottom: 20px;
    }

    .lisa-section-label i { width: 14px; height: 14px; }

    .lisa-section-title {
      font-size: 40px;
      font-weight: 800;
      letter-spacing: -1.5px;
      text-align: center;
      margin-bottom: 12px;
      line-height: 1.15;
    }

    .lisa-section-title span {
      background: linear-gradient(135deg, #6ee7b7, #6366f1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .lisa-section-subtitle {
      font-size: 16px;
      color: rgba(255,255,255,0.5);
      text-align: center;
      max-width: 520px;
      line-height: 1.6;
      margin-bottom: 48px;
    }

    /* Chat window */
    .lisa-chat-window {
      width: 100%;
      max-width: 580px;
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 80px rgba(0,0,0,0.4), 0 0 60px rgba(99,102,241,0.06);
    }

    /* Chat header bar */
    .lisa-chat-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 18px 24px;
      background: rgba(255,255,255,0.03);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .lisa-avatar {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 16px rgba(99,102,241,0.4);
      position: relative;
      overflow: hidden;
    }

    .lisa-avatar::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.2) 50%, transparent 60%);
      background-size: 200% 200%;
      animation: avatarShine 3s ease infinite;
    }

    .lisa-avatar-letter {
      font-size: 18px;
      font-weight: 800;
      color: white;
      letter-spacing: -0.5px;
      position: relative;
      z-index: 1;
      text-shadow: 0 1px 4px rgba(0,0,0,0.2);
    }

    @keyframes avatarShine {
      0% { background-position: 200% 200%; }
      100% { background-position: -200% -200%; }
    }

    .lisa-header-info { flex: 1; }
    .lisa-header-name { font-size: 15px; font-weight: 700; }
    .lisa-header-status {
      font-size: 12px;
      color: #6ee7b7;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .lisa-header-status::before {
      content: '';
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #10b981;
      animation: statusPulse 2s ease infinite;
    }

    @keyframes statusPulse {
      0%, 100% { opacity: 1; box-shadow: 0 0 4px #10b981; }
      50% { opacity: 0.5; box-shadow: 0 0 8px #10b981; }
    }

    .lisa-header-dots {
      display: flex;
      gap: 5px;
    }
    .lisa-header-dots span {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255,255,255,0.12);
    }

    /* Chat messages area */
    .lisa-chat-body {
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: 360px;
    }

    .chat-msg {
      display: flex;
      gap: 10px;
      max-width: 88%;
      opacity: 0;
      transform: translateY(12px);
      animation: msgAppear 0.5s ease forwards;
    }

    .chat-msg.user {
      align-self: flex-end;
      flex-direction: row-reverse;
    }

    .chat-msg-avatar {
      width: 30px;
      height: 30px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      flex-shrink: 0;
    }

    .chat-msg.lisa .chat-msg-avatar {
      background: linear-gradient(135deg, #6366f1, #a855f7, #ec4899);
      font-weight: 800;
      font-size: 13px;
      color: white;
      text-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .chat-msg.user .chat-msg-avatar {
      background: rgba(255,255,255,0.1);
    }

    .chat-msg-bubble {
      padding: 14px 18px;
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.6;
    }

    .chat-msg.lisa .chat-msg-bubble {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.08);
      color: rgba(255,255,255,0.85);
      border-top-left-radius: 4px;
    }

    .chat-msg.user .chat-msg-bubble {
      background: rgba(99,102,241,0.15);
      border: 1px solid rgba(99,102,241,0.25);
      color: white;
      border-top-right-radius: 4px;
    }

    /* Typing indicator */
    .chat-typing {
      display: flex;
      gap: 10px;
      max-width: 88%;
      opacity: 0;
    }

    .chat-typing.show {
      opacity: 1;
      animation: msgAppear 0.3s ease forwards;
    }

    .typing-dots {
      display: flex;
      gap: 4px;
      padding: 16px 20px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      border-top-left-radius: 4px;
    }

    .typing-dots span {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: rgba(255,255,255,0.35);
      animation: typingBounce 1.4s ease infinite;
    }
    .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
    .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

    @keyframes typingBounce {
      0%, 60%, 100% { transform: translateY(0); opacity: 0.35; }
      30% { transform: translateY(-5px); opacity: 1; }
    }

    @keyframes msgAppear {
      to { opacity: 1; transform: translateY(0); }
    }

    /* Lisa recommendation cards inside chat */
    .lisa-reco-cards {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .lisa-reco-card {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 12px 14px;
      flex: 1;
      min-width: 140px;
      transition: all 0.25s ease;
      cursor: pointer;
    }

    .lisa-reco-card:hover {
      background: rgba(99,102,241,0.1);
      border-color: rgba(99,102,241,0.3);
      transform: translateY(-2px);
    }

    .lisa-reco-emoji {
      font-size: 22px;
      margin-bottom: 6px;
    }

    .lisa-reco-name {
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 2px;
    }

    .lisa-reco-meta {
      font-size: 11px;
      color: rgba(255,255,255,0.4);
    }

    .lisa-reco-price {
      font-size: 13px;
      font-weight: 700;
      color: #10b981;
      margin-top: 6px;
    }

    /* Chat input bar */
    .lisa-chat-input {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 18px 24px;
      background: rgba(255,255,255,0.02);
      border-top: 1px solid rgba(255,255,255,0.06);
    }

    .lisa-chat-input input {
      flex: 1;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 12px 18px;
      color: white;
      font-size: 14px;
      outline: none;
      transition: all 0.25s;
    }

    .lisa-chat-input input::placeholder { color: rgba(255,255,255,0.3); }
    .lisa-chat-input input:focus { border-color: rgba(99,102,241,0.4); background: rgba(255,255,255,0.07); }

    .lisa-chat-send {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      background: #6366f1;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.25s;
      flex-shrink: 0;
    }
    .lisa-chat-send:hover { background: #4f46e5; transform: translateY(-1px); box-shadow: 0 4px 16px rgba(99,102,241,0.4); }
    .lisa-chat-send i { width: 18px; height: 18px; color: white; }

    /* CTA below chat */
    .lisa-cta {
      margin-top: 32px;
      text-align: center;
    }

    .lisa-cta-text {
      font-size: 14px;
      color: rgba(255,255,255,0.4);
      margin-bottom: 16px;
    }

    .lisa-cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 14px 32px;
      background: #6366f1;
      border: none;
      border-radius: 14px;
      color: white;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(99,102,241,0.3);
      text-decoration: none;
    }
    .lisa-cta-btn:hover { background: #4f46e5; transform: translateY(-2px); box-shadow: 0 8px 32px rgba(99,102,241,0.4); }
    .lisa-cta-btn i { width: 20px; height: 20px; }

    /* =============== LEFT SIDEBAR =============== */
    .left-sidebar {
      position: fixed; top: 0; left: -280px; width: 280px; height: 100vh;
      background: rgba(12, 12, 20, 0.97); backdrop-filter: blur(24px);
      border-right: 1px solid rgba(255, 255, 255, 0.08);
      padding: 24px 20px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000; overflow-y: auto;
    }
    .left-sidebar.open { left: 0; box-shadow: 5px 0 40px rgba(0, 0, 0, 0.5); }

    .sidebar-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5); opacity: 0; visibility: hidden;
      transition: all 0.4s ease; z-index: 999;
    }
    .sidebar-overlay.active { opacity: 1; visibility: visible; }

    .sidebar-content { margin-top: 56px; width: 100%; }
    .sidebar-section { margin-bottom: 28px; width: 100%; }
    .sidebar-section-title {
      font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px;
      color: rgba(255, 255, 255, 0.35); margin-bottom: 12px; padding-left: 12px; font-weight: 600;
    }
    .sidebar-item {
      display: flex; align-items: center; gap: 12px; width: 100%;
      background: transparent; border: 1px solid transparent;
      color: rgba(255, 255, 255, 0.7); padding: 12px 14px; border-radius: 10px;
      margin-bottom: 4px; text-decoration: none; text-align: left;
      font-weight: 500; font-size: 14px; transition: all 0.25s ease; cursor: pointer;
    }
    .sidebar-item:hover {
      background: rgba(99, 102, 241, 0.12); border-color: rgba(99, 102, 241, 0.25); color: white;
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.15), inset 0 0 20px rgba(99, 102, 241, 0.05);
    }
    .sidebar-item.active { background: rgba(99, 102, 241, 0.15); border-color: rgba(99, 102, 241, 0.3); color: white; }
    .sidebar-item.primary { background: rgba(99, 102, 241, 0.15); border-color: rgba(99, 102, 241, 0.4); color: #a5b4fc; font-weight: 600; }
    .sidebar-item.primary:hover {
      background: rgba(99, 102, 241, 0.25); border-color: rgba(99, 102, 241, 0.5); color: white;
      box-shadow: 0 0 24px rgba(99, 102, 241, 0.25), inset 0 0 20px rgba(99, 102, 241, 0.08);
    }
    .sidebar-item i { width: 18px; height: 18px; flex-shrink: 0; opacity: 0.7; }
    .sidebar-item:hover i { opacity: 1; }

    .sidebar-close-btn {
      position: absolute; top: 20px; right: 16px;
      background: rgba(255, 255, 255, 0.06); border: 1px solid rgba(255, 255, 255, 0.12);
      color: white; width: 36px; height: 36px; border-radius: 10px;
      cursor: pointer; transition: all 0.25s ease;
      display: flex; align-items: center; justify-content: center;
    }
    .sidebar-close-btn:hover { background: rgba(239, 68, 68, 0.15); border-color: rgba(239, 68, 68, 0.4); box-shadow: 0 0 16px rgba(239, 68, 68, 0.15); }
    .sidebar-close-btn i, .sidebar-close-btn svg { width: 18px; height: 18px; color: rgba(255,255,255,0.8); stroke: rgba(255,255,255,0.8); stroke-width: 2.5; }
    .sidebar-close-btn:hover i, .sidebar-close-btn:hover svg { color: white; stroke: white; }
    .sidebar-divider { height: 1px; background: rgba(255, 255, 255, 0.06); margin: 8px 0 20px; }

    /* =============== LOADING STATE =============== */
    .loading { display: none; color: white; font-size: 15px; margin-top: 20px; opacity: 0.8; }
    .loading.show { display: block; animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 0.8; } 50% { opacity: 0.4; } }

    /* =============== SCROLL INDICATOR =============== */
    .scroll-hint {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      color: rgba(255,255,255,0.25);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 2px;
      animation: fadeInUp 0.8s ease 1.2s backwards;
      cursor: pointer;
    }
    .scroll-hint i { width: 18px; height: 18px; animation: scrollBounce 2s ease infinite; }
    @keyframes scrollBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(6px); }
    }

    /* =============== RESPONSIVE =============== */
    @media (max-width: 768px) {
      header { padding: 20px 25px; }
      h1 { font-size: 42px; }
      .headline-separator { margin: 0 10px; width: 5px; height: 5px; }
      .headline-line { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; }
      .subtitle { font-size: 17px; }
      .search-box { flex-direction: column; padding: 20px; }
      .search-btn { width: 100%; }
      .features { gap: 12px; }
      .feature { padding: 12px 18px; font-size: 13px; }
      .lisa-section { padding: 50px 20px 80px; }
      .lisa-section-title { font-size: 28px; }
      .lisa-reco-cards { flex-direction: column; }
      .lisa-reco-card { min-width: unset; }
      .scroll-hint { display: none; }
    }
  </style>
</head>

<body>

  <!-- ===== ANIMATED BACKGROUND ===== -->
  <div class="bg-canvas-wrap">
    <canvas id="globeCanvas"></canvas>
    <canvas id="treeCanvas"></canvas>
    <div class="bg-gradient-top"></div>
    <div class="bg-vignette"></div>
    <div class="travel-particles" id="particles"></div>

    <!-- Nature elements (visible only in purpose mode) -->
    <div class="nature-elements" id="natureElements">
      <div class="bird bird-1"><svg viewBox="0 0 40 20" fill="none"><path d="M0 10 Q10 0 20 10 Q30 0 40 10" stroke="rgba(255,255,255,0.4)" stroke-width="1.5" fill="none"/></svg></div>
      <div class="bird bird-2"><svg viewBox="0 0 40 20" fill="none"><path d="M0 10 Q10 0 20 10 Q30 0 40 10" stroke="rgba(255,255,255,0.3)" stroke-width="1.5" fill="none"/></svg></div>
      <div class="bird bird-3"><svg viewBox="0 0 40 20" fill="none"><path d="M0 10 Q10 0 20 10 Q30 0 40 10" stroke="rgba(255,255,255,0.25)" stroke-width="1.5" fill="none"/></svg></div>
      <div class="bird bird-4"><svg viewBox="0 0 30 15" fill="none"><path d="M0 7 Q7 0 15 7 Q22 0 30 7" stroke="rgba(255,255,255,0.2)" stroke-width="1" fill="none"/></svg></div>
      <div class="bird bird-5"><svg viewBox="0 0 30 15" fill="none"><path d="M0 7 Q7 0 15 7 Q22 0 30 7" stroke="rgba(255,255,255,0.2)" stroke-width="1" fill="none"/></svg></div>
    </div>
  </div>

  <!-- SIDEBAR OVERLAY -->
  <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleLeftSidebar()"></div>

  <!-- LEFT SIDEBAR -->
  <div class="left-sidebar" id="leftSidebar">
    <button class="sidebar-close-btn" onclick="toggleLeftSidebar()" aria-label="Close menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
    </button>
    <div class="sidebar-content">
      <div class="sidebar-section">
        <div class="sidebar-section-title">Quick Access</div>
        <a href="/home" class="sidebar-item active"><i data-lucide="home"></i><span>Home</span></a>
        <a href="/itinerary" class="sidebar-item"><i data-lucide="plane"></i><span>My Itinerary</span></a>
        <a href="/dashboard" class="sidebar-item"><i data-lucide="layout-dashboard"></i><span>Saved Trips</span></a>
      </div>
      <div class="sidebar-divider"></div>
      <div class="sidebar-section">
        <div class="sidebar-section-title">Explore</div>
        <a href="/trending" class="sidebar-item"><i data-lucide="trending-up"></i><span>Trending</span></a>
      </div>
      <div class="sidebar-divider"></div>
      <div class="sidebar-section">
        <div class="sidebar-section-title">Legal &amp; Support</div>
        <a href="/legal" class="sidebar-item"><i data-lucide="shield-check"></i><span>Legal</span></a>
        <a href="/faq" class="sidebar-item"><i data-lucide="help-circle"></i><span>FAQs</span></a>
        <a href="/contact" class="sidebar-item"><i data-lucide="message-circle"></i><span>Contact Us</span></a>
      </div>
      <div class="sidebar-divider"></div>
      <div class="sidebar-section" id="sidebarAuthSection">
        <a href="/auth" class="sidebar-item primary" id="sidebarAuthButton"><i data-lucide="log-in"></i><span>Sign In</span></a>
      </div>
    </div>
  </div>

  <!-- ===== MAIN CONTENT ===== -->
  <div class="content">
    <!-- HEADER -->
    <header>
      <div class="header-left">
        <button class="header-menu-btn" onclick="toggleLeftSidebar()">
          <i data-lucide="menu"></i> Menu
        </button>
      </div>
      <div class="header-center">
        <a href="/home" class="logo"><img src="logo.png" alt="One-Up Travel"></a>
      </div>
      <div class="header-right">
        <a href="/auth" class="signin-btn" id="authButton">Sign In</a>
      </div>
    </header>

    <!-- HERO -->
    <div class="hero">
      <h1>
        <span class="headline-line">
          <span class="headline-accent" data-text="Your Next Adventure,">Your Next Adventure,</span>
        </span>
        <span class="headline-line">
          <span class="headline-accent" data-text="Perfected.">Perfected.</span>
        </span>
      </h1>
      <p class="subtitle">
        Let Lisa your AI travel agent plan your dream holiday. Tell her your locations, budget, and she'll do the rest.
      </p>

      <div class="search-container">
        <div class="search-box">
          <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="text" id="tripInput" placeholder="Enter your destination and duration" onkeypress="handleEnter(event)">
          <button class="search-btn" id="submitBtn" onclick="planTrip()">Plan Trip</button>
        </div>
      </div>

      <div class="loading" id="loading">Creating your personalized itinerary...</div>

      <!-- Travel with Purpose Toggle -->
      <div class="purpose-toggle-wrap">
        <div class="purpose-toggle-label" id="purposeLabel" onclick="togglePurpose()">
          <i data-lucide="leaf" style="width:15px;height:15px;"></i>
          Travel with Purpose
        </div>
        <div class="purpose-toggle" id="purposeToggle" onclick="togglePurpose()">
          <div class="purpose-toggle-dot"></div>
        </div>
        <div class="purpose-badge" id="purposeBadge">
          <i data-lucide="shield-check" style="width:12px;height:12px;"></i>
          Eco mode on
        </div>
      </div>

      <div class="features">
        <div class="feature" onclick="suggestTrip('trending')">
          <i data-lucide="flame" style="width:20px; height:20px; margin-right:8px;"></i>
          <span>Trending Holidays</span>
        </div>
        <div class="feature" onclick="suggestTrip('inspire')">
          <i data-lucide="sparkles" style="width:20px; height:20px; margin-right:8px;"></i>
          <span>Inspire Me</span>
        </div>
        <div class="feature" onclick="suggestTrip('wholesome')">
          <i data-lucide="leaf" style="width:20px; height:20px; margin-right:8px;"></i>
          <span>Wholesome Holidays</span>
        </div>
        <div class="feature" onclick="suggestTrip('adventure')">
          <i data-lucide="mountain" style="width:20px; height:20px; margin-right:8px;"></i>
          <span>Adventure Holidays</span>
        </div>
      </div>

      <!-- Scroll hint -->
      <div class="scroll-hint" onclick="document.querySelector('.lisa-section').scrollIntoView({behavior:'smooth'})">
        Meet Lisa
        <i data-lucide="chevron-down"></i>
      </div>
    </div>
  </div>

  <!-- ===== LISA AI PREVIEW SECTION ===== -->
  <div class="lisa-section" id="lisaSection">
    <div class="lisa-section-label"><i data-lucide="bot"></i> Your AI Travel Agent</div>
    <div class="lisa-section-title">Meet <span>Lisa</span></div>
    <div class="lisa-section-subtitle">Lisa plans trips the way a best friend would — she knows the hidden gems, gets the best prices, and handles every detail.</div>

    <div class="lisa-chat-window">
      <!-- Chat header -->
      <div class="lisa-chat-header">
        <div class="lisa-avatar"><span class="lisa-avatar-letter">L</span></div>
        <div class="lisa-header-info">
          <div class="lisa-header-name">Lisa</div>
          <div class="lisa-header-status">Online — ready to plan</div>
        </div>
        <div class="lisa-header-dots">
          <span></span><span></span><span></span>
        </div>
      </div>

      <!-- Chat body -->
      <div class="lisa-chat-body" id="lisaChatBody">
        <!-- Messages will be injected by JS -->
      </div>

      <!-- Input bar (decorative) -->
      <div class="lisa-chat-input">
        <input type="text" placeholder="Ask Lisa anything about your trip..." readonly>
        <button class="lisa-chat-send"><i data-lucide="send"></i></button>
      </div>
    </div>

    <div class="lisa-cta">
      <div class="lisa-cta-text">Ready to plan your dream trip?</div>
      <a href="#" class="lisa-cta-btn" onclick="event.preventDefault();window.scrollTo({top:0,behavior:'smooth'});setTimeout(()=>document.getElementById('tripInput').focus(),600);">
        <i data-lucide="sparkles"></i>
        Start Planning with Lisa
      </a>
    </div>
  </div>

  <!-- FOOTER -->
  <footer style="
    border-top: 1px solid rgba(255,255,255,0.06);
    padding: 60px 30px 40px;
    max-width: 1100px;
    margin: 0 auto;
    width: 100%;
  ">
    <div style="
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 40px;
      margin-bottom: 48px;
    " id="footerGrid">
      <!-- Brand -->
      <div>
        <a href="/home" style="display:inline-block;margin-bottom:16px;">
          <img src="logo.png" alt="One-Up Travel" style="height:36px;">
        </a>
        <p style="font-size:13px;color:rgba(255,255,255,0.4);line-height:1.7;max-width:280px;">
          AI-powered travel planning. Let Lisa build your perfect itinerary with real hotels, flights, and activities.
        </p>
        <div style="display:flex;gap:12px;margin-top:20px;">
          <a href="https://instagram.com/oneuptravel" target="_blank" rel="noopener" style="
            width:36px;height:36px;border-radius:10px;
            background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);
            display:flex;align-items:center;justify-content:center;
            color:rgba(255,255,255,0.5);transition:all 0.3s;text-decoration:none;
          " onmouseover="this.style.background='rgba(99,102,241,0.15)';this.style.borderColor='rgba(99,102,241,0.4)';this.style.color='#a5b4fc'" onmouseout="this.style.background='rgba(255,255,255,0.05)';this.style.borderColor='rgba(255,255,255,0.1)';this.style.color='rgba(255,255,255,0.5)'">
            <i data-lucide="instagram" style="width:16px;height:16px;"></i>
          </a>
          <a href="https://linkedin.com/company/oneuptravel" target="_blank" rel="noopener" style="
            width:36px;height:36px;border-radius:10px;
            background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);
            display:flex;align-items:center;justify-content:center;
            color:rgba(255,255,255,0.5);transition:all 0.3s;text-decoration:none;
          " onmouseover="this.style.background='rgba(99,102,241,0.15)';this.style.borderColor='rgba(99,102,241,0.4)';this.style.color='#a5b4fc'" onmouseout="this.style.background='rgba(255,255,255,0.05)';this.style.borderColor='rgba(255,255,255,0.1)';this.style.color='rgba(255,255,255,0.5)'">
            <i data-lucide="linkedin" style="width:16px;height:16px;"></i>
          </a>
        </div>
      </div>

      <!-- Product -->
      <div>
        <div style="font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:rgba(255,255,255,0.35);font-weight:600;margin-bottom:16px;">Product</div>
        <a href="/home" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Home</a>
        <a href="/itinerary" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">My Itinerary</a>
        <a href="/dashboard" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Saved Trips</a>
      </div>

      <!-- Support -->
      <div>
        <div style="font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:rgba(255,255,255,0.35);font-weight:600;margin-bottom:16px;">Support</div>
        <a href="/faq" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">FAQs</a>
        <a href="/contact" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Contact Us</a>
        <a href="mailto:Clem@one-up.cloud" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Clem@one-up.cloud</a>
      </div>

      <!-- Legal -->
      <div>
        <div style="font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:rgba(255,255,255,0.35);font-weight:600;margin-bottom:16px;">Legal</div>
        <a href="/legal#terms" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Terms of Service</a>
        <a href="/legal#privacy" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Privacy Policy</a>
        <a href="/legal#cookies" style="display:block;font-size:14px;color:rgba(255,255,255,0.55);text-decoration:none;margin-bottom:12px;transition:color 0.2s;" onmouseover="this.style.color='white'" onmouseout="this.style.color='rgba(255,255,255,0.55)'">Cookie Policy</a>
      </div>
    </div>

    <!-- Bottom bar -->
    <div style="border-top:1px solid rgba(255,255,255,0.06);padding-top:24px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px;">
      <p style="font-size:12px;color:rgba(255,255,255,0.3);">&copy; 2026 One-Up Travel Pty Ltd. All rights reserved.</p>
      <p style="font-size:12px;color:rgba(255,255,255,0.3);">Brisbane, Queensland, Australia</p>
    </div>
  </footer>

  <style>
    @media (max-width: 768px) {
      #footerGrid {
        grid-template-columns: 1fr 1fr !important;
        gap: 32px !important;
      }
    }
    @media (max-width: 480px) {
      #footerGrid {
        grid-template-columns: 1fr !important;
      }
    }
  </style>

  <script>
    // ===== SAFE LUCIDE =====
    function initIcons() { try { if(typeof lucide!=='undefined') lucide.createIcons(); } catch(e){} }
    initIcons();
    document.addEventListener('DOMContentLoaded', initIcons);
    window.addEventListener('load', initIcons);

    // ===== SIDEBAR =====
    function toggleLeftSidebar() {
      document.getElementById('leftSidebar').classList.toggle('open');
      document.getElementById('sidebarOverlay').classList.toggle('active');
      setTimeout(initIcons, 50);
    }
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        document.getElementById('leftSidebar').classList.remove('open');
        document.getElementById('sidebarOverlay').classList.remove('active');
      }
    });

    // ===== ENHANCED ANIMATED GLOBE =====
    (function() {
      const canvas = document.getElementById('globeCanvas');
      const ctx = canvas.getContext('2d');
      let w, h, R;

      function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        R = Math.min(w, h) * 0.38;
      }
      resize();
      window.addEventListener('resize', resize);

      const cx = () => w / 2;
      const cy = () => h / 2;
      const rotSpeed = 0.0002;

      // Project 3D sphere point to 2D
      function project(phi, theta, time) {
        const t = theta + time * rotSpeed;
        const x = R * Math.sin(phi) * Math.cos(t);
        const y = R * Math.cos(phi);
        const z = R * Math.sin(phi) * Math.sin(t);
        const perspective = 800;
        const scale = perspective / (perspective + z);
        return {
          x: cx() + x * scale,
          y: cy() + y * scale,
          z, scale,
          visible: z > -R * 0.3
        };
      }

      // City markers (lat/lng to phi/theta)
      const cities = [
        { name: 'Tokyo', lat: 35.68, lng: 139.69, color: '#f43f5e' },
        { name: 'Paris', lat: 48.85, lng: 2.35, color: '#f59e0b' },
        { name: 'New York', lat: 40.71, lng: -74.01, color: '#10b981' },
        { name: 'Sydney', lat: -33.87, lng: 151.21, color: '#6366f1' },
        { name: 'Bali', lat: -8.34, lng: 115.09, color: '#ec4899' },
        { name: 'London', lat: 51.51, lng: -0.13, color: '#f59e0b' },
        { name: 'Dubai', lat: 25.20, lng: 55.27, color: '#8b5cf6' },
        { name: 'Rio', lat: -22.91, lng: -43.17, color: '#10b981' },
        { name: 'Cape Town', lat: -33.93, lng: 18.42, color: '#f59e0b' },
        { name: 'Bangkok', lat: 13.76, lng: 100.50, color: '#ec4899' },
        { name: 'Reykjavik', lat: 64.15, lng: -21.94, color: '#6ee7b7' },
        { name: 'Marrakech', lat: 31.63, lng: -8.01, color: '#f59e0b' },
        { name: 'Singapore', lat: 1.35, lng: 103.82, color: '#f43f5e' },
        { name: 'Maldives', lat: 3.20, lng: 73.22, color: '#38bdf8' },
        { name: 'Santorini', lat: 36.39, lng: 25.46, color: '#f59e0b' },
      ].map(c => ({
        ...c,
        phi: (90 - c.lat) * Math.PI / 180,
        theta: c.lng * Math.PI / 180,
        pulseOffset: Math.random() * Math.PI * 2
      }));

      // Flight arc routes
      const routes = [
        [0, 4],   // Tokyo → Bali
        [2, 1],   // New York → Paris
        [3, 0],   // Sydney → Tokyo
        [5, 6],   // London → Dubai
        [7, 2],   // Rio → New York
        [9, 4],   // Bangkok → Bali
        [8, 6],   // Cape Town → Dubai
        [10, 5],  // Reykjavik → London
        [12, 13], // Singapore → Maldives
        [11, 14], // Marrakech → Santorini
      ];

      // Scattered star points for surface detail
      const stars = [];
      for (let i = 0; i < 300; i++) {
        stars.push({
          phi: Math.acos(2 * Math.random() - 1),
          theta: Math.random() * Math.PI * 2,
          brightness: 0.15 + Math.random() * 0.35,
          size: 0.5 + Math.random() * 1.2
        });
      }

      let time = 0;

      function draw() {
        ctx.clearRect(0, 0, w, h);
        time += 16;

        // === ATMOSPHERE GLOW ===
        const atmGrad = ctx.createRadialGradient(cx(), cy(), R * 0.85, cx(), cy(), R * 1.4);
        atmGrad.addColorStop(0, 'rgba(99, 102, 241, 0.06)');
        atmGrad.addColorStop(0.4, 'rgba(99, 102, 241, 0.03)');
        atmGrad.addColorStop(1, 'transparent');
        ctx.fillStyle = atmGrad;
        ctx.beginPath();
        ctx.arc(cx(), cy(), R * 1.4, 0, Math.PI * 2);
        ctx.fill();

        // Inner glow ring
        ctx.strokeStyle = 'rgba(99, 102, 241, 0.08)';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(cx(), cy(), R * 1.01, 0, Math.PI * 2);
        ctx.stroke();

        // === LATITUDE LINES ===
        for (let lat = -60; lat <= 60; lat += 30) {
          const phi = (90 - lat) * Math.PI / 180;
          ctx.beginPath();
          let started = false;
          for (let lng = 0; lng <= 360; lng += 3) {
            const theta = lng * Math.PI / 180;
            const p = project(phi, theta, time);
            if (!p.visible) { started = false; continue; }
            if (!started) { ctx.moveTo(p.x, p.y); started = true; }
            else ctx.lineTo(p.x, p.y);
          }
          ctx.strokeStyle = 'rgba(99, 102, 241, 0.06)';
          ctx.lineWidth = 0.8;
          ctx.stroke();
        }

        // === LONGITUDE LINES ===
        for (let lng = 0; lng < 360; lng += 30) {
          const theta = lng * Math.PI / 180;
          ctx.beginPath();
          let started = false;
          for (let lat = -90; lat <= 90; lat += 3) {
            const phi = (90 - lat) * Math.PI / 180;
            const p = project(phi, theta, time);
            if (!p.visible) { started = false; continue; }
            if (!started) { ctx.moveTo(p.x, p.y); started = true; }
            else ctx.lineTo(p.x, p.y);
          }
          ctx.strokeStyle = 'rgba(99, 102, 241, 0.04)';
          ctx.lineWidth = 0.8;
          ctx.stroke();
        }

        // === SURFACE SCATTER POINTS ===
        stars.forEach(s => {
          const p = project(s.phi, s.theta, time);
          if (!p.visible) return;
          ctx.fillStyle = `rgba(165, 180, 252, ${s.brightness * p.scale * 0.5})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, s.size * p.scale, 0, Math.PI * 2);
          ctx.fill();
        });

        // === FLIGHT ARC PATHS ===
        routes.forEach(([ai, bi]) => {
          const a = cities[ai], b = cities[bi];
          const pa = project(a.phi, a.theta, time);
          const pb = project(b.phi, b.theta, time);
          if (!pa.visible && !pb.visible) return;

          // Arc: interpolate along great circle, lift midpoint outward
          const segments = 40;
          const pts = [];
          for (let i = 0; i <= segments; i++) {
            const t = i / segments;
            const iPhi = a.phi + (b.phi - a.phi) * t;
            const iTheta = a.theta + (b.theta - a.theta) * t;
            // Lift the arc above the surface
            const lift = 1 + 0.12 * Math.sin(t * Math.PI);
            const x = R * lift * Math.sin(iPhi) * Math.cos(iTheta + time * rotSpeed);
            const y = R * lift * Math.cos(iPhi);
            const z = R * lift * Math.sin(iPhi) * Math.sin(iTheta + time * rotSpeed);
            const perspective = 800;
            const scale = perspective / (perspective + z);
            pts.push({ x: cx() + x * scale, y: cy() + y * scale, z, scale, visible: z > -R * 0.2 });
          }

          // Draw arc
          ctx.beginPath();
          let started = false;
          pts.forEach(p => {
            if (!p.visible) { started = false; return; }
            if (!started) { ctx.moveTo(p.x, p.y); started = true; }
            else ctx.lineTo(p.x, p.y);
          });
          ctx.strokeStyle = `rgba(99, 102, 241, 0.12)`;
          ctx.lineWidth = 1;
          ctx.stroke();

          // Animated dot traveling along arc
          const progress = ((time * 0.0004 + ai * 0.1) % 1);
          const dotIdx = Math.floor(progress * segments);
          const dot = pts[Math.min(dotIdx, segments)];
          if (dot && dot.visible) {
            ctx.fillStyle = `rgba(165, 180, 252, ${0.8 * dot.scale})`;
            ctx.beginPath();
            ctx.arc(dot.x, dot.y, 2.5 * dot.scale, 0, Math.PI * 2);
            ctx.fill();

            // Dot trail
            for (let t = 1; t <= 5; t++) {
              const ti = Math.max(0, dotIdx - t * 2);
              const tp = pts[ti];
              if (tp && tp.visible) {
                ctx.fillStyle = `rgba(165, 180, 252, ${(0.4 - t * 0.07) * tp.scale})`;
                ctx.beginPath();
                ctx.arc(tp.x, tp.y, (2 - t * 0.3) * tp.scale, 0, Math.PI * 2);
                ctx.fill();
              }
            }
          }
        });

        // === CITY MARKERS ===
        cities.forEach((city, ci) => {
          const p = project(city.phi, city.theta, time);
          if (!p.visible) return;

          const pulseT = Math.sin(time * 0.002 + city.pulseOffset) * 0.5 + 0.5;

          // Outer glow pulse
          const glowR = (6 + pulseT * 4) * p.scale;
          const glow = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, glowR);
          glow.addColorStop(0, city.color + '40');
          glow.addColorStop(1, city.color + '00');
          ctx.fillStyle = glow;
          ctx.beginPath();
          ctx.arc(p.x, p.y, glowR, 0, Math.PI * 2);
          ctx.fill();

          // Core dot
          ctx.fillStyle = city.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, (2.5 + pulseT * 0.8) * p.scale, 0, Math.PI * 2);
          ctx.fill();

          // Bright center
          ctx.fillStyle = 'rgba(255,255,255,0.9)';
          ctx.beginPath();
          ctx.arc(p.x, p.y, 1 * p.scale, 0, Math.PI * 2);
          ctx.fill();
        });

        // === OUTER RING DECORATION ===
        const ringAngle = time * 0.0003;
        ctx.strokeStyle = 'rgba(99, 102, 241, 0.04)';
        ctx.lineWidth = 1;
        ctx.setLineDash([4, 12]);
        ctx.beginPath();
        ctx.arc(cx(), cy(), R * 1.15, ringAngle, ringAngle + Math.PI * 1.5);
        ctx.stroke();
        ctx.setLineDash([]);

        // Second decorative ring
        ctx.strokeStyle = 'rgba(139, 92, 246, 0.03)';
        ctx.beginPath();
        ctx.arc(cx(), cy(), R * 1.25, -ringAngle, -ringAngle + Math.PI);
        ctx.stroke();

        requestAnimationFrame(draw);
      }
      draw();
    })();

    // ===== GROWING TREE (Purpose Mode) =====
    (function() {
      const tc = document.getElementById('treeCanvas');
      const tctx = tc.getContext('2d');
      let tw, th;

      function resizeTree() {
        tw = tc.width = window.innerWidth;
        th = tc.height = window.innerHeight;
      }
      resizeTree();
      window.addEventListener('resize', resizeTree);

      // Tree parameters
      const maxDepth = 10;
      let growProgress = 0;
      let growing = false;
      let leaves = [];
      let fallingLeaves = [];

      function startGrow() {
        growProgress = 0;
        growing = true;
        leaves = [];
        fallingLeaves = [];
      }

      // Seeded random for consistent tree shape
      let seed = 42;
      function seededRandom() {
        seed = (seed * 16807 + 0) % 2147483647;
        return (seed - 1) / 2147483646;
      }

      function drawBranch(x, y, angle, length, depth, maxD) {
        if (depth > maxD || length < 2) return;

        const endX = x + Math.cos(angle) * length;
        const endY = y + Math.sin(angle) * length;

        // Thickness
        const thick = Math.max(1, (maxD - depth) * 2.2);

        // Color: brown trunk → green branches
        const t = depth / maxD;
        const r = Math.round(60 + t * 10);
        const g = Math.round(40 + t * 100);
        const b = Math.round(20 + t * 20);
        const alpha = 0.7 + (1 - t) * 0.3;

        tctx.beginPath();
        tctx.moveTo(x, y);
        tctx.lineTo(endX, endY);
        tctx.strokeStyle = `rgba(${r},${g},${b},${alpha})`;
        tctx.lineWidth = thick;
        tctx.lineCap = 'round';
        tctx.stroke();

        // Add leaves at branch tips
        if (depth >= maxD - 3 && depth >= 5) {
          const leafSize = 3 + seededRandom() * 8;
          leaves.push({
            x: endX + (seededRandom() - 0.5) * 10,
            y: endY + (seededRandom() - 0.5) * 10,
            size: leafSize,
            hue: 100 + seededRandom() * 50, // green to yellow-green
            brightness: 0.3 + seededRandom() * 0.4,
            sway: seededRandom() * Math.PI * 2,
          });
        }

        // Branch splitting
        const spread = 0.35 + seededRandom() * 0.25;
        const shrink = 0.65 + seededRandom() * 0.12;
        const drift = (seededRandom() - 0.5) * 0.1;

        drawBranch(endX, endY, angle - spread + drift, length * shrink, depth + 1, maxD);
        drawBranch(endX, endY, angle + spread + drift, length * shrink, depth + 1, maxD);

        // Extra branch on some
        if (seededRandom() > 0.6 && depth < maxD - 2) {
          drawBranch(endX, endY, angle + (seededRandom() - 0.5) * 0.8, length * shrink * 0.7, depth + 1, maxD);
        }
      }

      function drawTree(time) {
        tctx.clearRect(0, 0, tw, th);

        // Background glow
        const glow = tctx.createRadialGradient(tw/2, th*0.55, 20, tw/2, th*0.55, th*0.5);
        glow.addColorStop(0, 'rgba(16,185,129,0.06)');
        glow.addColorStop(0.5, 'rgba(20,184,166,0.03)');
        glow.addColorStop(1, 'transparent');
        tctx.fillStyle = glow;
        tctx.fillRect(0, 0, tw, th);

        // Ground
        const groundY = th * 0.72;
        const groundGrad = tctx.createLinearGradient(0, groundY - 20, 0, groundY + 60);
        groundGrad.addColorStop(0, 'rgba(16,185,129,0.02)');
        groundGrad.addColorStop(0.5, 'rgba(16,185,129,0.06)');
        groundGrad.addColorStop(1, 'transparent');
        tctx.fillStyle = groundGrad;
        tctx.fillRect(0, groundY - 20, tw, 80);

        // Small ground grass line
        tctx.beginPath();
        tctx.moveTo(tw * 0.2, groundY);
        tctx.bezierCurveTo(tw * 0.35, groundY - 3, tw * 0.65, groundY - 3, tw * 0.8, groundY);
        tctx.strokeStyle = 'rgba(16,185,129,0.15)';
        tctx.lineWidth = 2;
        tctx.stroke();

        // Draw tree
        seed = 42; // Reset seed for consistent shape
        leaves = [];
        const currentDepth = Math.min(maxDepth, Math.floor(growProgress * maxDepth));
        const trunkLen = Math.min(th * 0.12, 90);

        if (currentDepth > 0) {
          drawBranch(tw/2, groundY, -Math.PI/2, trunkLen, 0, currentDepth);
        }

        // Draw leaves with sway
        leaves.forEach(leaf => {
          const sway = Math.sin(time * 0.001 + leaf.sway) * 2;
          const pulse = 0.85 + Math.sin(time * 0.002 + leaf.sway) * 0.15;

          // Leaf glow
          const lg = tctx.createRadialGradient(leaf.x + sway, leaf.y, 0, leaf.x + sway, leaf.y, leaf.size * 2);
          lg.addColorStop(0, `hsla(${leaf.hue}, 70%, 45%, ${leaf.brightness * pulse})`);
          lg.addColorStop(1, 'transparent');
          tctx.fillStyle = lg;
          tctx.beginPath();
          tctx.arc(leaf.x + sway, leaf.y, leaf.size * 2, 0, Math.PI * 2);
          tctx.fill();

          // Leaf dot
          tctx.fillStyle = `hsla(${leaf.hue}, 80%, 50%, ${(leaf.brightness + 0.2) * pulse})`;
          tctx.beginPath();
          tctx.arc(leaf.x + sway, leaf.y, leaf.size * 0.6, 0, Math.PI * 2);
          tctx.fill();
        });

        // Falling leaves
        if (growProgress >= 1) {
          if (fallingLeaves.length < 8 && Math.random() > 0.97) {
            fallingLeaves.push({
              x: tw * 0.3 + Math.random() * tw * 0.4,
              y: groundY - th * 0.15 - Math.random() * th * 0.2,
              vx: (Math.random() - 0.5) * 0.5,
              vy: 0.3 + Math.random() * 0.3,
              rot: Math.random() * Math.PI * 2,
              rotSpeed: (Math.random() - 0.5) * 0.03,
              size: 3 + Math.random() * 3,
              hue: 100 + Math.random() * 50,
              life: 1,
            });
          }
          fallingLeaves.forEach((fl, i) => {
            fl.x += fl.vx + Math.sin(time * 0.002 + i) * 0.3;
            fl.y += fl.vy;
            fl.rot += fl.rotSpeed;
            fl.life -= 0.003;

            if (fl.life > 0) {
              tctx.save();
              tctx.translate(fl.x, fl.y);
              tctx.rotate(fl.rot);
              tctx.fillStyle = `hsla(${fl.hue}, 70%, 45%, ${fl.life * 0.6})`;
              tctx.beginPath();
              tctx.ellipse(0, 0, fl.size, fl.size * 0.5, 0, 0, Math.PI * 2);
              tctx.fill();
              tctx.restore();
            }
          });
          fallingLeaves = fallingLeaves.filter(fl => fl.life > 0 && fl.y < groundY + 50);
        }

        // Firefly particles around tree
        if (growProgress > 0.5) {
          for (let i = 0; i < 12; i++) {
            const angle = time * 0.0003 + i * (Math.PI * 2 / 12);
            const dist = 60 + Math.sin(time * 0.001 + i * 2) * 40;
            const fx = tw/2 + Math.cos(angle) * dist;
            const fy = groundY - th * 0.15 + Math.sin(angle * 1.5) * dist * 0.6;
            const flicker = 0.2 + Math.sin(time * 0.003 + i * 3) * 0.15;

            tctx.fillStyle = `rgba(52, 211, 153, ${flicker})`;
            tctx.beginPath();
            tctx.arc(fx, fy, 1.5, 0, Math.PI * 2);
            tctx.fill();
          }
        }
      }

      let treeTime = 0;
      function animateTree() {
        treeTime += 16;

        // Only grow when purpose mode is active
        if (document.documentElement.classList.contains('purpose-theme')) {
          if (growProgress < 1) {
            growProgress += 0.008;
            if (growProgress > 1) growProgress = 1;
          }
          drawTree(treeTime);
        }

        requestAnimationFrame(animateTree);
      }
      animateTree();

      // Expose for toggle
      window.updateGlobeTheme = function(isPurpose) {
        if (isPurpose) {
          growProgress = 0; // Reset to grow again
        }
      };
    })();

    // ===== TRAVEL PARTICLES =====
    (function() {
      const container = document.getElementById('particles');
      const emojis = ['✈️', '🌍', '🗺️', '🧳', '🏝️', '⛰️', '🌅', '🗼', '🎒', '🚀'];
      
      for (let i = 0; i < 15; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.textContent = emojis[Math.floor(Math.random() * emojis.length)];
        p.style.left = Math.random() * 100 + '%';
        p.style.animationDuration = (15 + Math.random() * 20) + 's';
        p.style.animationDelay = (Math.random() * 20) + 's';
        p.style.fontSize = (12 + Math.random() * 14) + 'px';
        container.appendChild(p);
      }
    })();

    // ===== LISA CHAT ANIMATION =====
    (function() {
      const chatBody = document.getElementById('lisaChatBody');
      const messages = [
        { from: 'lisa', text: "Hey! 👋 I'm Lisa, your AI travel agent. Tell me about your dream trip — where, when, and what kind of experience you're after." },
        { from: 'user', text: "My partner and I want to go to Bali in March for a health retreat. We love yoga and want to explore the culture too. Budget around $2,500 AUD." },
        { from: 'lisa', text: "Love that! 🧘‍♀️ Ubud is exactly where you need to be — it's the spiritual heart of Bali. Surrounded by rice terraces, incredible temples, and some of the best wellness retreats in the world. March is dry season too, so the weather will be perfect. Let me put something together..." },
        { from: 'lisa', type: 'cards', text: "Here's what I'd recommend:", cards: [
          { emoji: '✈️', name: 'Brisbane → Bali', meta: 'Virgin Australia · Direct', price: 'From $450' },
          { emoji: '🏡', name: 'Fivelements Retreat', meta: 'Ubud · Luxury eco-wellness', price: '$185/night' },
          { emoji: '🧘', name: 'Daily Yoga & Healing', meta: 'Vinyasa, sound baths, massage', price: 'Included' },
          { emoji: '🛕', name: 'Temple & Culture Tour', meta: 'Tirta Empul, Tegallalang, Goa Gajah', price: '$60 pp' }
        ]},
        { from: 'lisa', text: "Total comes to about $2,340 AUD including flights, 7 nights at the retreat, daily yoga sessions, a Balinese cooking class, and the temple tour — all under budget! Want me to build the full itinerary? 🌿" }
      ];

      let shown = false;

      function animateChat() {
        if (shown) return;
        shown = true;
        chatBody.innerHTML = '';

        let delay = 300;
        messages.forEach((msg, i) => {
          // Show typing first
          delay += (i === 0 ? 0 : 800);
          const typingDelay = delay;
          
          if (msg.from === 'lisa') {
            delay += 1200;
          } else {
            delay += 600;
          }

          const msgDelay = delay;

          setTimeout(() => {
            // Remove any typing indicator
            const typing = chatBody.querySelector('.chat-typing');
            if (typing) typing.remove();

            const div = document.createElement('div');
            div.className = `chat-msg ${msg.from}`;
            div.style.animationDelay = '0s';

            const avatar = msg.from === 'lisa' ? '<span style="font-weight:800;font-size:13px;text-shadow:0 1px 3px rgba(0,0,0,0.2)">L</span>' : '👤';
            
            let bubbleContent = msg.text;
            if (msg.type === 'cards') {
              bubbleContent = msg.text + `<div class="lisa-reco-cards">${msg.cards.map(c => `
                <div class="lisa-reco-card">
                  <div class="lisa-reco-emoji">${c.emoji}</div>
                  <div class="lisa-reco-name">${c.name}</div>
                  <div class="lisa-reco-meta">${c.meta}</div>
                  <div class="lisa-reco-price">${c.price}</div>
                </div>
              `).join('')}</div>`;
            }

            div.innerHTML = `
              <div class="chat-msg-avatar">${avatar}</div>
              <div class="chat-msg-bubble">${bubbleContent}</div>
            `;
            chatBody.appendChild(div);
            chatBody.scrollTop = chatBody.scrollHeight;
            initIcons();
          }, msgDelay);

          // Show typing indicator before lisa messages
          if (msg.from === 'lisa' && i > 0) {
            setTimeout(() => {
              const oldTyping = chatBody.querySelector('.chat-typing');
              if (oldTyping) oldTyping.remove();

              const typing = document.createElement('div');
              typing.className = 'chat-typing show';
              typing.innerHTML = `
                <div class="chat-msg-avatar" style="width:30px;height:30px;border-radius:10px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:800;color:white;text-shadow:0 1px 3px rgba(0,0,0,0.2);">L</div>
                <div class="typing-dots"><span></span><span></span><span></span></div>
              `;
              chatBody.appendChild(typing);
              chatBody.scrollTop = chatBody.scrollHeight;
            }, typingDelay);
          }

          delay += 400;
        });
      }

      // Trigger on scroll into view
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            animateChat();
            observer.disconnect();
          }
        });
      }, { threshold: 0.3 });

      observer.observe(document.getElementById('lisaSection'));
    })();

    // ===== ORIGINAL TRIP FUNCTIONS =====
    // Travel with Purpose toggle
    let purposeMode = localStorage.getItem('travelWithPurpose') === 'true';

    function togglePurpose() {
      purposeMode = !purposeMode;
      localStorage.setItem('travelWithPurpose', purposeMode);
      const toggle = document.getElementById('purposeToggle');
      const label = document.getElementById('purposeLabel');
      const badge = document.getElementById('purposeBadge');

      toggle.classList.toggle('active', purposeMode);
      label.classList.toggle('active', purposeMode);
      badge.classList.toggle('show', purposeMode);

      // Apply/remove theme
      document.documentElement.classList.toggle('purpose-theme', purposeMode);

      // Update globe colors
      if (typeof updateGlobeTheme === 'function') updateGlobeTheme(purposeMode);

      // Update search placeholder to reflect mode
      const input = document.getElementById('tripInput');
      input.placeholder = purposeMode
        ? 'Plan an eco-friendly trip to...'
        : 'Enter your destination and duration';
    }

    // Restore toggle state on load
    if (purposeMode) {
      document.getElementById('purposeToggle').classList.add('active');
      document.getElementById('purposeLabel').classList.add('active');
      document.getElementById('purposeBadge').classList.add('show');
      document.getElementById('tripInput').placeholder = 'Plan an eco-friendly trip to...';
    }

    function handleEnter(event) {
      if (event.key === 'Enter') planTrip();
    }

    function suggestTrip(category) {
      const suggestions = {
        trending: ['Tokyo, Japan - 7 days','Paris, France - 5 days','Bali, Indonesia - 10 days','Iceland - 6 days','New York City - 4 days'],
        inspire: ['Santorini, Greece - 6 days','Kyoto, Japan - 5 days','Swiss Alps - 7 days','Amalfi Coast, Italy - 6 days','Morocco - 8 days'],
        wholesome: ['Tuscany, Italy - 7 days','New Zealand countryside - 10 days','Costa Rica eco-lodges - 8 days','Scottish Highlands - 6 days','Norway fjords - 7 days'],
        adventure: ['Nepal - Everest Base Camp trek - 12 days','Patagonia, Chile - 10 days','Safari in Tanzania - 8 days','Petra, Jordan - 6 days','Amazon Rainforest - 7 days']
      };
      document.getElementById('tripInput').value = suggestions[category][Math.floor(Math.random() * suggestions[category].length)];
    }

    function planTrip() {
      const input = document.getElementById('tripInput').value.trim();
      const loading = document.getElementById('loading');
      const submitBtn = document.getElementById('submitBtn');

      if (!input) { alert('Please enter a destination'); return; }

      loading.classList.add('show');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Planning...';
      localStorage.setItem('currentTrip', input);
      localStorage.setItem('travelWithPurpose', purposeMode);

      setTimeout(() => { window.location.href = '/itinerary'; }, 1800);
    }
  </script>

  <!-- Firebase Integration -->
  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="auth-handler.js"></script>

</body>
</html>
